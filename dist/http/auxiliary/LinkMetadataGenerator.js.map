{"version":3,"file":"LinkMetadataGenerator.js","sourceRoot":"","sources":["../../../src/http/auxiliary/LinkMetadataGenerator.ts"],"names":[],"mappings":";;;AAAA,kDAA8C;AAC9C,0DAAqD;AAGrD,2DAAwD;AAExD;;;;;GAKG;AACH,MAAa,qBAAsB,SAAQ,qCAAiB;IAI1D,YAAmB,IAAY,EAAE,kBAA+C;QAC9E,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;IAC/C,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,QAAgC;QAClD,MAAM,UAAU,GAAG,EAAE,IAAI,EAAE,QAAQ,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;QACvD,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,qBAAqB,CAAC,UAAU,CAAC,EAAE;YAC9D,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EACpB,sBAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,EAC1E,yBAAU,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;SACtC;IACH,CAAC;CACF;AAlBD,sDAkBC","sourcesContent":["import { namedNode } from '@rdfjs/data-model';\nimport { SOLID_META } from '../../util/Vocabularies';\nimport type { RepresentationMetadata } from '../representation/RepresentationMetadata';\nimport type { AuxiliaryIdentifierStrategy } from './AuxiliaryIdentifierStrategy';\nimport { MetadataGenerator } from './MetadataGenerator';\n\n/**\n * Adds a link to the auxiliary resource when called on the subject resource.\n * Specifically: <subjectId> <link> <auxiliaryId> will be added.\n *\n * In case the input is metadata of an auxiliary resource no metadata will be added\n */\nexport class LinkMetadataGenerator extends MetadataGenerator {\n  private readonly link: string;\n  private readonly identifierStrategy: AuxiliaryIdentifierStrategy;\n\n  public constructor(link: string, identifierStrategy: AuxiliaryIdentifierStrategy) {\n    super();\n    this.link = link;\n    this.identifierStrategy = identifierStrategy;\n  }\n\n  public async handle(metadata: RepresentationMetadata): Promise<void> {\n    const identifier = { path: metadata.identifier.value };\n    if (!this.identifierStrategy.isAuxiliaryIdentifier(identifier)) {\n      metadata.add(this.link,\n        namedNode(this.identifierStrategy.getAuxiliaryIdentifier(identifier).path),\n        SOLID_META.terms.ResponseMetadata);\n    }\n  }\n}\n"]}