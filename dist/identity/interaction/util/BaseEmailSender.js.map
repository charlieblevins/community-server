{"version":3,"file":"BaseEmailSender.js","sourceRoot":"","sources":["../../../../src/identity/interaction/util/BaseEmailSender.ts"],"names":[],"mappings":";;;AAAA,2CAA6C;AAE7C,+CAA4C;AAe5C;;GAEG;AACH,MAAa,eAAgB,SAAQ,yBAAW;IAI9C,YAAmB,IAAqB;;QACtC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,eAAe,GAAG,4BAAe,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACzD,IAAI,CAAC,UAAU,GAAG,MAAA,IAAI,CAAC,UAAU,mCAAI,OAAO,CAAC;IAC/C,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAa;QAC/D,MAAM,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC;YAClC,IAAI,EAAE,IAAI,CAAC,UAAU;YACrB,EAAE,EAAE,SAAS;YACb,OAAO;YACP,IAAI;YACJ,IAAI;SACL,CAAC,CAAC;IACL,CAAC;CACF;AAnBD,0CAmBC","sourcesContent":["import { createTransport } from 'nodemailer';\nimport type Mail from 'nodemailer/lib/mailer';\nimport { EmailSender } from './EmailSender';\nimport type { EmailArgs } from './EmailSender';\n\nexport interface EmailSenderArgs {\n  emailConfig: {\n    host: string;\n    port: number;\n    auth: {\n      user: string;\n      pass: string;\n    };\n  };\n  senderName?: string;\n}\n\n/**\n * Sends e-mails using nodemailer.\n */\nexport class BaseEmailSender extends EmailSender {\n  private readonly mailTransporter: Mail;\n  private readonly senderName: string;\n\n  public constructor(args: EmailSenderArgs) {\n    super();\n    this.mailTransporter = createTransport(args.emailConfig);\n    this.senderName = args.senderName ?? 'Solid';\n  }\n\n  public async handle({ recipient, subject, text, html }: EmailArgs): Promise<void> {\n    await this.mailTransporter.sendMail({\n      from: this.senderName,\n      to: recipient,\n      subject,\n      text,\n      html,\n    });\n  }\n}\n"]}