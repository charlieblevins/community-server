{"version":3,"file":"FormToJsonConverter.js","sourceRoot":"","sources":["../../../src/storage/conversion/FormToJsonConverter.ts"],"names":[],"mappings":";;;AAAA,6CAAoC;AACpC,uFAAoF;AAEpF,6FAA0F;AAC1F,0DAA8F;AAC9F,sDAAyD;AACzD,0DAAuD;AAEvD,iFAA8E;AAE9E;;;GAGG;AACH,MAAa,mBAAoB,SAAQ,2DAA4B;IACnE;QACE,KAAK,CAAC,gDAAiC,EAAE,+BAAgB,CAAC,CAAC;IAC7D,CAAC;IAEM,KAAK,CAAC,MAAM,CAAC,EAAE,cAAc,EAA+B;QACjE,MAAM,IAAI,GAAG,MAAM,6BAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QACzD,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,mBAAK,CAAC,IAAI,CAAC,CAAC,CAAC;QACzC,MAAM,QAAQ,GAAG,IAAI,+CAAsB,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAE,CAAC,2BAAY,CAAC,EAAE,+BAAgB,EAAE,CAAC,CAAC;QAC3G,OAAO,IAAI,yCAAmB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IACjD,CAAC;CACF;AAXD,kDAWC","sourcesContent":["import { parse } from 'querystring';\nimport { BasicRepresentation } from '../../http/representation/BasicRepresentation';\nimport type { Representation } from '../../http/representation/Representation';\nimport { RepresentationMetadata } from '../../http/representation/RepresentationMetadata';\nimport { APPLICATION_JSON, APPLICATION_X_WWW_FORM_URLENCODED } from '../../util/ContentTypes';\nimport { readableToString } from '../../util/StreamUtil';\nimport { CONTENT_TYPE } from '../../util/Vocabularies';\nimport type { RepresentationConverterArgs } from './RepresentationConverter';\nimport { TypedRepresentationConverter } from './TypedRepresentationConverter';\n\n/**\n * Converts application/x-www-form-urlencoded data to application/json.\n * Due to the nature of form data, the result will be a simple key/value JSON object.\n */\nexport class FormToJsonConverter extends TypedRepresentationConverter {\n  public constructor() {\n    super(APPLICATION_X_WWW_FORM_URLENCODED, APPLICATION_JSON);\n  }\n\n  public async handle({ representation }: RepresentationConverterArgs): Promise<Representation> {\n    const body = await readableToString(representation.data);\n    const json = JSON.stringify(parse(body));\n    const metadata = new RepresentationMetadata(representation.metadata, { [CONTENT_TYPE]: APPLICATION_JSON });\n    return new BasicRepresentation(json, metadata);\n  }\n}\n"]}